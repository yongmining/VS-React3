<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src='https://unpkg.com/react@18/umd/react.development.js'></script>
    <script crossorigin src='https://unpkg.com/react-dom@18/umd/react-dom.development.js'></script>
    <script src='https://unpkg.com/@babel/standalone/babel.min.js'></script>
 
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">


        //마운트 시점의 생명주기 API
        // 마운트 시 constructor
        // -> getDerivedStateFromProgs -> render -> componentDidMount 순으로 호출된다.

        class Greeting extends React.Component {
            

            // 컴포넌트를 새로 만들 떄 마다 호출된다.
            constructor(props){

                super(props);

                console.log('constructor');
                console.log(props);

                // state를 초기화 할 목적으로 주로 사용
                // 해당 위치에서 props 를 이용해 state 값을 초기화 하면
                // 마운트 시점에는 state 변경이 가능하지만,
                // update 시점에는 state 값을 변경하지 못한다.
                this.state = {
                    text: ''
                }
            }
            // props에 있는 값을 state 에 넣을 떄 사용하는 메소드이다.
            // 마운트와 업데이트 시 호출된다.
            static getDerivedStateFromProps(nextProps, prevState){

                console.log('getDerivedStateFromProps');
                console.log('nextProps' ,nextProps);
                console.log('prevState', prevState);

                if(nextProps.text !== prevState.text){

                    return{text : nextProps.text};

                }
                // state 변경을 원하지 않으면 null을 리턴한다.
                return null;

            }
            // 리액트 엘리먼트를 랜더트리 형태로 구성하는 시점에 호툴되는 메소드이다.
            // 랜더링 될 컴포넌트의 형태를 리액트 컴포넌트로 반환한다.
            // render 메소드는 this.state 와 this.prps에 접근할 수 있다.
            // 아무런 컴포넌트도 보여주고 싶지 않을 떄 null 혹은 flasy값을 반환한다.

            //주의사항
            // 이 메소드 내에서는 직접 setState를 호출하면 안된다.
            // 이벤트 콜백 함수 내에서 간접적으로 setState 를 호출해야 한다.
            // 또한 브라우저의 DOM에 접근해서도 안된다.
            // DOM 정보를 가지고 오거나 state의 변화를 줄 떄 componentDidMount에서 처리해야 한다.
            render (){

                console.log('render')
                return <h1> hello world, {this.state.text}</h1>

            }

            // 컴포넌트가 웹브라우저상 나타난 이후 호출하는 메소드
            // 다른 자바스크립트 라이브러리 또는 프레임워크의 함수를 호출하거나
            // 이벤트 등록, setTimeout, setInterval, 네트워크 요청 같은
            // 비동기 작업을 주로 처리하는 함수이다.
            ComponentDidMount(){
                console.log('compontDidMount');
            }
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<Greeting text="홍길동"/>);
    </script>
</body>
</html>